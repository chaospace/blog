---
layout: post

title: github-pages에 Travis ic 사용기
subtitle: "travis-ci가 뭐야?"
cover_image: blog-cover.jpg

excerpt: "github-pages에 blog를 만들었으나 알수없는 build failed만 나오고 명확한 이유가 없다."

tag: [travis-ci, github-pages]

category: "programming"

author:
  name: chaospace
  twitter: ichaospace
  gplus: 100687498195339762535 
  bio: Front&Developer
  image: ks.png
---

github-pages를 통해 로컬에서 문제없이 잘 보이던 내용이 github에 올리고 보니 failded라고 나오며 명확한 이유도 안보였다.  
{% include _figure.html src="/images/2015-01-05/git-pages-build-fail.jpg" caption="build failed message" %}
<br>
여기서 선택할 수 있는 방법은 2가지 였는데  

 1. 로컬에서 build된 _site폴더를 github에 올린다.
 2. 삽질을 하며 실제 에러 원인이 무엇인지 밝혀낸다.

1.번을 선택할 경우 jekyll을 사용할 이유가 없다는 생각에 2번을 선택하고  
[github에서 제공하는 페이지](https://help.github.com/articles/troubleshooting-github-pages-build-failures/)를 보며 천천히 삽질을 시작했다.  

### github-pages build failed 원인

- 확인되지 않은 이메일 주소
- 지원되지 않는 플러그인
- 용량제한(1GB)
- _config.yml 설정 문제 
- 지속적인 통합 서비스 사용( travis ci사용 시 .travis.yml설정 )
- markdown 에러, utf-8인코딩, ... 기타 등등

다 확인해보지 않았지만 위에 언급된 에러는 설정화면에 가면  
앞에 이미지 처럼 error문구가 나올 듯 싶다.  
그럼 error문구 조차 없는 경우는 어떻게 할까 싶었는데  
글 후반에 [Travis CI profile page](https://travis-ci.org)을 언급하며  
**jekyll build 에러메시지를 보여주는 서비스** 블라블라... 가 보였다.

{% include _figure.html src="https://travis-ci.com/img/brand-standards/logo-lockup-vertical.svg" caption="Travis CI 로고" %}

***

### Travis CI

> CI는 Continuous Integration의 약자로  
프로그램 빌드 또는 테스트를 지속적으로  
할 것을 가리키는 프로그래머 용어.

음 그럼 testRunner 같은 녀석인데 Travis CI를 쓰면  
github에 배포된 코드를 Travis를 통해 테스트 가능한가 보군  
 ↑ 정도로 이해하고 사용법을 알아 보았다.
 
TravisCI 사용을 위해서는 

1. Travis CI사이트에서 github계정으로 로그인
2. 계정의 account메뉴 클릭
3. 저장소 목록 중 원하는 저장소의 버튼을 on으로 설정
4. 설정한 저장소에 .travis.yml 파일 생성 
5. 저장소 Webhooks & Service메뉴 클릭 후 Travis CI확인
6. Travis CI 옆의 edit메뉴로 상태 확인
7. 저장소 push후 travis ci에 등록된 저장소 확인  

***

{% include _figure.html src="/images/2015-01-05/travis-ci-repo-list.jpg" caption="저장소 목록" %}
{% include _figure.html src="/images/2015-01-05/git-services.jpg" caption="저장소의 services메뉴의 Travis CI확인" %}
{% include _figure.html src="/images/2015-01-05/git-services-status.jpg" caption="services상태 확인" %}
{% include _figure.html src="/images/2015-01-05/travis-ci-home.jpg" caption="travis에 등록된 저장소 확인" %}

***

↑위 사진처럼 travis연동 후 travis-ci에서 제공하는 콘솔 창을 통해  
jekyll의 build과정을 볼수 있고 이때 어떤 과정에서 에러가 나는지 확인 할 수 있다.  

### 확인한 나의 에러는
- window환경이라 config.yml에서 hilighter: rouge를 사용.
- 언어옵션에서 plaintext사용.
- github는 hilighter : pygments사용
- 언어옵션에 plaintext옵션이 없음.

{% include _figure.html src="http://lh4.ggpht.com/-6Ao3UhixyY0/UEhi2_DQL_I/AAAAAAAAB1E/Ah3z0w-dswU/OTL.png" caption="window 미워!" %}

***

### 참고사항
.travis.yml에는 여러 옵션 값이 있지만 jekyll build과정을 보는 옵션은 아래와 같다.
{% highlight JavaScript %}
language : ruby
script	: "bundle exec jekyll build"
{% endhighlight %}  


Gemfile을 github-pages에 같이 올려두면 관련  
travis검사 시 plugIn설치 결과를 볼 수 있으니 참고하자.
{% highlight JavaScript %}
source 'https://rubygems.org'
gem 'github-pages'
{% endhighlight %}